单调区间在线统计
++++++++++++++++++++++++

:strong:`单调性`\ 和\ :strong:`单调区间`\ 本是数学上的概念，在初等数学里，主要用于描述一元实数函数的增减性，也叫\ :strong:`单调性`\ 。

对于一个一元实数函数 :math:`f(x)`，如果在某一个取值范围内，对于任意两个不同的自变量 :math:`x_1\lt x_2`，它们所对应的函数值大小关系是 :math:`f(x_1)\lt f(x_2)`，那么我们称函数 :math:`f(x)` 在这个自变量取值范围内\ :strong:`单调递增`\ ，这个取值范围叫做函数 :math:`f(x)` 的一个\ :strong:`单调递增区间`\ ；反之，如果在某一个取值范围内，对于任意两个不同的自变量 :math:`x_1\lt x_2`，它们所对应的函数值大小关系是 :math:`f(x_1)\gt f(x_2)` 的，那么我们称函数 :math:`f(x)` 在这个自变量取值范围内\ :strong:`单调递减`\ ，这个取值范围叫做函数 :math:`f(x)` 的一个\ :strong:`单调递减区间`\ 。通俗地说，单调递增就是函数值随着自变量的增大而增大，单调递减就是函数值随着自变量的增大而减小。

例如正比例函数 :math:`f(x)=2x` 就是一个单调递增函数，它的单调区间是整个实数域，对于任意两个不同的实数 :math:`x_1\lt x_2`，必定满足 :math:`2x_1\lt 2x_2`。

反比例函数 :math:`f(x)={2\over x}` 则有两个单调区间，:math:`(-\infty, 0)` 和\ :math:`(0,+\infty)`，它们都是单调递减区间。任意两个不同的正数 :math:`0\lt x_1\lt x_2` 满足 :math:`{2\over x_1} \gt {2\over x_2}`；对于任意两个不同的负数，情况同样如此。

平方数函数 :math:`f(x)=x^2` 也有两个单调区间，:math:`(-\infty, 0]` 和 :math:`[0,+\infty)`，但是前者是单调递减区间，后者是单调递增区间，这是因为负数的平方等于负数的绝对值的平方，而负数越大，其绝对值越小。和反比例函数的情况不同的是，平方函数的两个单调区间里增减性不同，而且两个区间在零点处是连续而且平滑的。

.. image:: ../../images/221_mono_int.png

从上面三个函数的图像里，沿着自变量增大的方向去直观地看，在单调递增区间里，函数的图像是向上爬山的样子，在单调递减区间里，函数的图像是向下滑坡的样子。

.. admonition:: 补充

   事实上，还可以有函数值不变的区间，叫做常数区间。比如常数函数 :math:`f(x)=c`，整个实数域就是它的常数区间。

   另外，把单调区间可以通过降低条件降格为普通的递增或递减区间。以单调递增区间为例，如果把判断条件中关于函数值的不等式从严格的小于改成小于等于：:math:`x_1\lt x_2 \implies f(x_1)\le f(x_2)`，那么区间就降格成了普通的递减区间。在这样的区间里允许包含一些常数区间。这种情况在分段函数里经常出现。


函数的单调性是数学里特别特别特别重要的一个知识点，但是单调性并不只用于分析实数函数，它也经常用于分析数列。在计算机领域里数列的单调性（或者叫做离散数据依位置的单调性）是更加常见的问题。数列的单调性和函数单调性有类似的地方，也有不同的地方。

数列 :math:`\{a_n\}` 就是一组n个用正整数连续编号的数：:math:`a_1,a_2,\dots,a_n`，为了和函数的情形做类比，我们可以把每个数的下标编号看作是自变量，把数值本身看作是函数值，于是就把数列看成了一个自变量只能是整数的离散函数。有些书为了表示这种类比关系，会把数列的第i项写成 :math:`a(i)` 这样的类函数形式，也有些书上为了迎合C++语言而写成 ``a[i]`` 这样的数组元素形式，我们这里还是按照数学习惯写成 :math:`a_i`。

设有正整数 :math:`i\lt j\le n`，如果数列 :math:`\{a_n\}` 在从第i项 :math:`a_i` 到第j项 :math:`a_j` 这一段里，所有项都比它前面的项更大，我们就把这一段的下标范围 :math:`[i,j]` 称为数列的一个单调递增区间，长度为 :math:`j-i+1`；反之如果这一段里的所有项都比它前面的项更小，它就是数列的一个单调递减区间，长度当然也是 :math:`j-i+1`。

.. admonition:: 补充

   和函数类似，数列也可以有常数区间、普通的递增区间和递减区间。

.. attention::

   由于数列的下标是整数这个离散的特性，导致数列可以有只含有一个项的区间。这样的区间既可以认为是递增的，也可以认为是递减的，更可以认为是常数的。具体要怎样看待它需要根据题意来判断。

另外，在数列的任意一个区间里，用其中值最大的项去减值最小的项，二者之差称为这个区间的\ :strong:`振幅`\ 或\ :strong:`幅度`\ 。特殊的，如果区间 :math:`[i,j]` 是递增区间或递减区间，那么无论它单调与否，它的振幅一定是 :math:`\vert a_j-a_i\vert`。递增区间的振幅又叫\ :strong:`增幅`\ ，递减区间的振幅又叫\ :strong:`降幅`\ 。

数列单调区间的统计问题通常是求最长（最短）单调区间的长度和振幅最大（最小）单调区间的振幅两种统计指标。这两种统计问题都能用在线统计算法解决，时间复杂度 :math:`O(n)`，空间复杂度 :math:`O(1)`，都是极高效率的经典算法。


求长度最长单调区间
^^^^^^^^^^^^^^^^^^^^^^^^^


求振幅最大单调区间
^^^^^^^^^^^^^^^^^^^^^^^^^


（待续）